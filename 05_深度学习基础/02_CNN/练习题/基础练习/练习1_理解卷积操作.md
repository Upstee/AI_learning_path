# 练习1：理解卷积操作

## 📋 练习目标

- 理解卷积操作的数学原理
- 能够手动计算卷积结果
- 理解填充和步长对输出尺寸的影响
- 可视化卷积操作的过程

## 🎯 难度等级

⭐⭐（基础）

## 📝 练习要求

### 任务1：手动计算卷积

给定以下输入图像和卷积核：

**输入图像** (5×5)：
```
[[1, 2, 3, 4, 5],
 [6, 7, 8, 9, 10],
 [11, 12, 13, 14, 15],
 [16, 17, 18, 19, 20],
 [21, 22, 23, 24, 25]]
```

**卷积核** (3×3)：
```
[[0, -1, 0],
 [-1, 4, -1],
 [0, -1, 0]]
```

**要求**：
1. 手动计算卷积结果（stride=1, padding=0）
2. 写出计算过程
3. 解释这个卷积核的作用

### 任务2：实现基本卷积函数

实现一个基本的2D卷积函数：

```python
def conv2d_basic(input_image, kernel, stride=1, padding=0):
    """
    基本的2D卷积操作
    
    参数:
        input_image: 输入图像 (H, W)
        kernel: 卷积核 (K, K)
        stride: 步长，默认1
        padding: 填充大小，默认0
    
    返回:
        output: 输出特征图 (H_out, W_out)
    """
    # TODO: 实现卷积操作
    pass
```

**要求**：
1. 实现基本的卷积操作
2. 支持填充和步长
3. 验证任务1的结果

### 任务3：可视化卷积过程

创建一个可视化函数，展示卷积操作的过程：

```python
def visualize_convolution(input_image, kernel, stride=1, padding=0):
    """
    可视化卷积操作过程
    
    要求：
    1. 显示输入图像
    2. 显示卷积核
    3. 显示卷积核在图像上的滑动过程
    4. 显示输出特征图
    """
    # TODO: 实现可视化
    pass
```

### 任务4：测试不同参数

使用不同的填充和步长参数，观察输出尺寸的变化：

1. **无填充，步长=1**：计算输出尺寸
2. **填充=1，步长=1**：计算输出尺寸
3. **无填充，步长=2**：计算输出尺寸
4. **填充=1，步长=2**：计算输出尺寸

验证输出尺寸公式：
$$H_{out} = \lfloor \frac{H_{in} + 2P - K}{S} \rfloor + 1$$

## 💡 提示

1. **卷积操作的本质**：在输入图像上滑动卷积核，计算点积
2. **填充的作用**：在输入周围添加零值，可以保持输出尺寸
3. **步长的作用**：控制卷积核移动的距离，影响输出尺寸
4. **边界处理**：当卷积核超出边界时，如何处理？

## ✅ 检查清单

完成练习后，检查以下内容：

- [ ] 能够手动计算卷积结果
- [ ] 实现了基本的卷积函数
- [ ] 函数支持填充和步长
- [ ] 实现了可视化功能
- [ ] 验证了输出尺寸公式
- [ ] 理解了不同参数的影响

## 📚 参考资料

- [卷积神经网络原理详解](../理论笔记/卷积神经网络原理详解.md)
- [从零实现卷积操作](../代码示例/01_从零实现卷积操作.ipynb)（如果已创建）

## 🎓 扩展思考

1. 为什么卷积操作能够提取特征？
2. 不同的卷积核会产生什么不同的效果？
3. 如何设计卷积核来检测边缘、模糊、锐化等效果？

---

**准备好了吗？开始练习吧！** 🚀

